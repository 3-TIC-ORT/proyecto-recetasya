<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Recetas - RecipEat</title>
    <link rel="stylesheet" href="pmisrecetas.css">
    <style>
        
    </style>
</head>
<body>

    <button id="home">
        <img class="casita" src="IMAGENES FRONT/home.png" alt="Imagen Volver al inicio">
        <h5 class="vi">Volver al inicio</h5>    
    </button>

    <div class="cabeza">
        <img src="IMAGENES FRONT/Logodef.png" alt="Logo RecipEat">
    </div>

    <!-- Barra superior estilo imagen -->
    <div class="texto">
        <h2 class="titulo">Mis recetas</h2>
    </div>

    <!-- Título Contador -->
    <div class="contador-container">
        <h2 class="titulo-contador" id="tituloContador">Recetas (0)</h2>
    </div>
    
    <!-- ESTADO VACÍO (Empty State) -->
    <div class="empty-state" id="emptyState">
        <div class="empty-icon">
            <!-- SVG Personalizado: Lupa Limpia -->
            <svg viewBox="0 0 100 100">
                <!-- Mango de la lupa -->
                <line x1="65" y1="65" x2="85" y2="85" stroke="#3d4a28" stroke-width="8" stroke-linecap="round" />
                <!-- Círculo de la lupa -->
                <circle cx="45" cy="45" r="25" stroke="#3d4a28" stroke-width="6" fill="transparent" />
                <!-- Reflejo del vidrio (detalle sutil) -->
                <path d="M 55 35 Q 60 40 55 45" stroke="#3d4a28" stroke-width="3" fill="transparent" opacity="0.5" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="empty-title">No tenes recetas creadas aun</div>
        <div class="empty-subtitle">Todas las recetas que crees apareceran aca</div>
    </div>
    
    <div class="recetas-container" id="recetasContainer">
        <!-- Las recetas se inyectan aquí -->
    </div>

    <button class="btn-agregar" onclick="abrirModal()">+</button>

    <!-- 1. MODAL FORMULARIO -->
    <div class="modal-overlay" id="modalForm">
        <div class="modal-content">
            <span class="close-btn" onclick="cerrarModal()">&times;</span>
            <h2 style="text-align: center; margin-top:0; color: #3d4a28;">Nueva Receta</h2>
            
            <form id="formReceta">
                <div class="form-group">
                    <label for="nombre">Nombre de la receta:</label>
                    <input type="text" id="nombre" placeholder="Ej: Tarta de Manzana" required>
                </div>
                <div class="form-group">
                    <label for="imagenInput">Subir Foto del Plato (Opcional):</label>
                    <input type="file" id="imagenInput" accept="image/*">
                    <div class="preview-container">
                        <span id="previewText">Vista previa de la imagen</span>
                        <img id="imagenPreview" src="" alt="Vista previa">
                    </div>
                </div>
                <div class="form-group">
                    <label for="categoria">Categoría:</label>
                    <select id="categoria">
                        <option value="Dulce">Dulce</option>
                        <option value="Salado">Salado</option>
                        <option value="Bebida">Bebida</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="apto">Apto para:</label>
                    <select id="apto">
                        <option value="ConTACC">Con TACC</option>
                        <option value="SinTACC">Sin TACC</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ingredientes">Ingredientes (separados por coma o enter):</label>
                    <textarea id="ingredientes" placeholder="Ej: Harina, Huevos, Leche..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="pasos">Pasos (separados por coma o enter):</label>
                    <textarea id="pasos" placeholder="Ej: Paso 1: Batir huevos. Paso 2: Mezclar harina..." required></textarea>
                </div>
                <button type="submit" class="btn-submit">Publicar Receta</button>
            </form>
        </div>
    </div>

    <!-- 2. MODAL ADVERTENCIA IMAGEN -->
    <div class="modal-overlay" id="modalAdvertenciaImagen">
        <div class="modal-alert-content">
            <h3 style="color: #3d4a28;">¿Publicar sin foto?</h3>
            <p>Te recomendamos agregar una imagen para que tu receta se vea mejor y atraiga más miradas.</p>
            <div class="btn-accion-container">
                <button class="btn-cancelar" onclick="cerrarAdvertenciaImagen()">Volver y subir</button>
                <button class="btn-confirmar-verde" onclick="confirmarGuardarSinImagen()">Publicar sin foto</button>
            </div>
        </div>
    </div>

    <!-- 3. MODAL CONFIRMACIÓN BORRAR -->
    <div class="modal-overlay" id="modalConfirmacionBorrar">
        <div class="modal-alert-content">
            <h3 style="color: #d32f2f;">¿Eliminar Receta?</h3>
            <p>¿Estás seguro de que deseas eliminar esta receta? Esta acción no se puede deshacer.</p>
            <div class="btn-accion-container">
                <button class="btn-cancelar" onclick="cerrarConfirmacionBorrar()">Cancelar</button>
                <button class="btn-confirmar-rojo" onclick="confirmarEliminacion()">Sí, Eliminar</button>
            </div>
        </div>
    </div>

    <!-- 4. POPUP DE ÉXITO -->
    <div class="success-popup" id="popupExito">
        <span class="checkmark">✔</span>
        <h3 id="mensajeExitoTitulo">¡Receta Guardada!</h3>
        <p>Tu receta se ha actualizado correctamente.</p>
        <button onclick="cerrarPopup()" class="btn-submit" style="width: auto; margin-top: 1rem;">Aceptar</button>
    </div>

    <div id="lista-creadas"></div>
    <div id="lista-favoritos"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/JZylber/SoqueTIC-Client@v1.4.2/soquetic-client.js"></script>
    <script src="pmisrecetas.js"></script>
</body>
</html>